# Kubernetes Metrics Changes: v1.34.0 â†’ v1.35.0

## Summary
- **Added**: 25 metrics
- **Removed**: 0 metrics
- **Updated**: 12 metrics
- **Total Changes**: 37 metrics

## Changed Metrics

| Metric Name | Type | Change Type | Stability Level | Description |
|-------------|------|-------------|----------------|-------------|
| [aggregator_discovery_nopeer_requests_total](#aggregator_discovery_nopeer_requests_total) | Counter | Added | `ALPHA` |  |
| [aggregator_discovery_peer_aggregated_cache_hits_total](#aggregator_discovery_peer_aggregated_cache_hits_total) | Counter | Added | `ALPHA` |  |
| [aggregator_discovery_peer_aggregated_cache_misses_total](#aggregator_discovery_peer_aggregated_cache_misses_total) | Counter | Added | `ALPHA` |  |
| [apiserver_authentication_jwt_authenticator_jwks_fetch_last_key_set_info](#apiserver_authentication_jwt_authenticator_jwks_fetch_last_key_set_info) | Custom | Added | `ALPHA` |  |
| [apiserver_authentication_jwt_authenticator_jwks_fetch_last_timestamp_seconds](#apiserver_authentication_jwt_authenticator_jwks_fetch_last_timestamp_seconds) | Gauge | Added | `ALPHA` |  |
| [apiserver_storage_objects](#apiserver_storage_objects) | Gauge | Updated | `STABLE` | Marked as deprecated in version `1.34.0`. |
| [apiserver_validation_declarative_validation_panics_total](#apiserver_validation_declarative_validation_panics_total) | Counter | Added | `ALPHA` |  |
| [apiserver_validation_declarative_validation_parity_discrepancies_total](#apiserver_validation_declarative_validation_parity_discrepancies_total) | Counter | Added | `ALPHA` |  |
| [horizontal_pod_autoscaler_controller_desired_replicas](#horizontal_pod_autoscaler_controller_desired_replicas) | Gauge | Added | `ALPHA` |  |
| [horizontal_pod_autoscaler_controller_num_horizontal_pod_autoscalers](#horizontal_pod_autoscaler_controller_num_horizontal_pod_autoscalers) | Gauge | Added | `ALPHA` |  |
| [kubelet_image_manager_ensure_image_requests_total](#kubelet_image_manager_ensure_image_requests_total) | Counter | Added | `ALPHA` |  |
| [kubelet_image_volume_mounted_errors_total](#kubelet_image_volume_mounted_errors_total) | Counter | Updated | `BETA` | Stability level changed from `ALPHA` to `BETA`. |
| [kubelet_image_volume_mounted_succeed_total](#kubelet_image_volume_mounted_succeed_total) | Counter | Updated | `BETA` | Stability level changed from `ALPHA` to `BETA`. |
| [kubelet_image_volume_requested_total](#kubelet_image_volume_requested_total) | Counter | Updated | `BETA` | Stability level changed from `ALPHA` to `BETA`. |
| [kubelet_imagemanager_image_mustpull_checks_total](#kubelet_imagemanager_image_mustpull_checks_total) | Counter | Added | `ALPHA` |  |
| [kubelet_imagemanager_inmemory_pulledrecords_usage_percent](#kubelet_imagemanager_inmemory_pulledrecords_usage_percent) | Gauge | Added | `ALPHA` |  |
| [kubelet_imagemanager_inmemory_pullintents_usage_percent](#kubelet_imagemanager_inmemory_pullintents_usage_percent) | Gauge | Added | `ALPHA` |  |
| [kubelet_imagemanager_ondisk_pulledrecords](#kubelet_imagemanager_ondisk_pulledrecords) | Gauge | Added | `ALPHA` |  |
| [kubelet_imagemanager_ondisk_pullintents](#kubelet_imagemanager_ondisk_pullintents) | Gauge | Added | `ALPHA` |  |
| [kubelet_podcertificate_states](#kubelet_podcertificate_states) | Custom | Added | `ALPHA` |  |
| [resourceclaim_controller_resource_claims](#resourceclaim_controller_resource_claims) | Custom | Updated | `ALPHA` | Help text changed. <br> Added labels: [`source`]. |
| [rest_client_exec_plugin_policy_call_total](#rest_client_exec_plugin_policy_call_total) | Counter | Added | `ALPHA` |  |
| [scheduler_batch_attempts_total](#scheduler_batch_attempts_total) | Counter | Added | `ALPHA` |  |
| [scheduler_batch_cache_flushed_total](#scheduler_batch_cache_flushed_total) | Counter | Added | `ALPHA` |  |
| [scheduler_get_node_hint_duration_seconds](#scheduler_get_node_hint_duration_seconds) | Histogram | Added | `ALPHA` |  |
| [scheduler_pod_scheduled_after_flush_total](#scheduler_pod_scheduled_after_flush_total) | Counter | Added | `ALPHA` |  |
| [scheduler_resourceclaim_creates_total](#scheduler_resourceclaim_creates_total) | Counter | Added | `ALPHA` |  |
| [scheduler_store_schedule_results_duration_seconds](#scheduler_store_schedule_results_duration_seconds) | Histogram | Added | `ALPHA` |  |
| [statefulset_controller_statefulset_max_unavailable](#statefulset_controller_statefulset_max_unavailable) | Gauge | Added | `ALPHA` |  |
| [statefulset_controller_statefulset_unavailable_replicas](#statefulset_controller_statefulset_unavailable_replicas) | Gauge | Added | `ALPHA` |  |
| [workqueue_adds_total](#workqueue_adds_total) | Counter | Updated | `BETA` | Stability level changed from `ALPHA` to `BETA`. |
| [workqueue_depth](#workqueue_depth) | Gauge | Updated | `BETA` | Stability level changed from `ALPHA` to `BETA`. |
| [workqueue_longest_running_processor_seconds](#workqueue_longest_running_processor_seconds) | Gauge | Updated | `BETA` | Stability level changed from `ALPHA` to `BETA`. |
| [workqueue_queue_duration_seconds](#workqueue_queue_duration_seconds) | Histogram | Updated | `BETA` | Stability level changed from `ALPHA` to `BETA`. |
| [workqueue_retries_total](#workqueue_retries_total) | Counter | Updated | `BETA` | Stability level changed from `ALPHA` to `BETA`. |
| [workqueue_unfinished_work_seconds](#workqueue_unfinished_work_seconds) | Gauge | Updated | `BETA` | Stability level changed from `ALPHA` to `BETA`. |
| [workqueue_work_duration_seconds](#workqueue_work_duration_seconds) | Histogram | Updated | `BETA` | Stability level changed from `ALPHA` to `BETA`. |
## Detailed Changes

### aggregator_discovery_nopeer_requests_total
```diff
+- name: nopeer_requests_total
+  subsystem: aggregator_discovery
+  help: Counter of number of times no-peer (non peer-aggregated) discovery was requested
+  type: Counter
+  stabilityLevel: ALPHA
```

### aggregator_discovery_peer_aggregated_cache_hits_total
```diff
+- name: peer_aggregated_cache_hits_total
+  subsystem: aggregator_discovery
+  help: Counter of number of times discovery was served from peer-aggregated cache
+  type: Counter
+  stabilityLevel: ALPHA
```

### aggregator_discovery_peer_aggregated_cache_misses_total
```diff
+- name: peer_aggregated_cache_misses_total
+  subsystem: aggregator_discovery
+  help: Counter of number of times discovery was aggregated across all API servers
+  type: Counter
+  stabilityLevel: ALPHA
```

### apiserver_authentication_jwt_authenticator_jwks_fetch_last_key_set_info
```diff
+- name: apiserver_authentication_jwt_authenticator_jwks_fetch_last_key_set_info
+  help: Information about the last JWKS fetched by the JWT authenticator with hash as label, split by api server identity and jwt issuer.
+  type: Custom
+  stabilityLevel: ALPHA
+  labels:
+    - jwt_issuer_hash
+    - apiserver_id_hash
+    - hash
```

### apiserver_authentication_jwt_authenticator_jwks_fetch_last_timestamp_seconds
```diff
+- name: jwt_authenticator_jwks_fetch_last_timestamp_seconds
+  subsystem: authentication
+  namespace: apiserver
+  help: Timestamp of the last successful or failed JWKS fetch split by result, api server identity and jwt issuer for the JWT authenticator.
+  type: Gauge
+  stabilityLevel: ALPHA
+  labels:
+    - apiserver_id_hash
+    - jwt_issuer_hash
+    - result
```

### apiserver_storage_objects
```diff
 - name: apiserver_storage_objects
   help: '[DEPRECATED, consider using apiserver_resource_objects instead] Number of stored objects at the time of last check split by kind. In case of a fetching error, the value will be -1.'
   type: Gauge
+  deprecatedVersion: 1.34.0
   stabilityLevel: STABLE
   labels:
     - resource
```

### apiserver_validation_declarative_validation_panics_total
```diff
+- name: declarative_validation_panics_total
+  subsystem: validation
+  namespace: apiserver
+  help: Number of panics in declarative validation, broken down by validation identifier.
+  type: Counter
+  stabilityLevel: ALPHA
+  labels:
+    - validation_identifier
```

### apiserver_validation_declarative_validation_parity_discrepancies_total
```diff
+- name: declarative_validation_parity_discrepancies_total
+  subsystem: validation
+  namespace: apiserver
+  help: Number of discrepancies between declarative and handwritten validation, broken down by validation identifier.
+  type: Counter
+  stabilityLevel: ALPHA
+  labels:
+    - validation_identifier
```

### horizontal_pod_autoscaler_controller_desired_replicas
```diff
+- name: desired_replicas
+  subsystem: horizontal_pod_autoscaler_controller
+  help: Current desired replica count for HPA objects.
+  type: Gauge
+  stabilityLevel: ALPHA
+  labels:
+    - hpa_name
+    - namespace
```

### horizontal_pod_autoscaler_controller_num_horizontal_pod_autoscalers
```diff
+- name: num_horizontal_pod_autoscalers
+  subsystem: horizontal_pod_autoscaler_controller
+  help: Current number of controlled HPA objects.
+  type: Gauge
+  stabilityLevel: ALPHA
```

### kubelet_image_manager_ensure_image_requests_total
```diff
+- name: image_manager_ensure_image_requests_total
+  subsystem: kubelet
+  help: Number of ensure-image requests processed by the kubelet.
+  type: Counter
+  stabilityLevel: ALPHA
+  labels:
+    - present_locally
+    - pull_policy
+    - pull_required
```

### kubelet_image_volume_mounted_errors_total
```diff
 - name: image_volume_mounted_errors_total
   subsystem: kubelet
   help: Number of failed image volume mounts.
   type: Counter
-  stabilityLevel: ALPHA
+  stabilityLevel: BETA
```

### kubelet_image_volume_mounted_succeed_total
```diff
 - name: image_volume_mounted_succeed_total
   subsystem: kubelet
   help: Number of successful image volume mounts.
   type: Counter
-  stabilityLevel: ALPHA
+  stabilityLevel: BETA
```

### kubelet_image_volume_requested_total
```diff
 - name: image_volume_requested_total
   subsystem: kubelet
   help: Number of requested image volumes.
   type: Counter
-  stabilityLevel: ALPHA
+  stabilityLevel: BETA
```

### kubelet_imagemanager_image_mustpull_checks_total
```diff
+- name: imagemanager_image_mustpull_checks_total
+  subsystem: kubelet
+  help: Counter for how many times kubelet checked whether credentials need to be re-verified to access an image
+  type: Counter
+  stabilityLevel: ALPHA
+  labels:
+    - result
```

### kubelet_imagemanager_inmemory_pulledrecords_usage_percent
```diff
+- name: imagemanager_inmemory_pulledrecords_usage_percent
+  subsystem: kubelet
+  help: The ImagePulledRecords in-memory cache usage in percent.
+  type: Gauge
+  stabilityLevel: ALPHA
```

### kubelet_imagemanager_inmemory_pullintents_usage_percent
```diff
+- name: imagemanager_inmemory_pullintents_usage_percent
+  subsystem: kubelet
+  help: The ImagePullIntents in-memory cache usage in percent.
+  type: Gauge
+  stabilityLevel: ALPHA
```

### kubelet_imagemanager_ondisk_pulledrecords
```diff
+- name: imagemanager_ondisk_pulledrecords
+  subsystem: kubelet
+  help: Number of ImagePulledRecords stored on disk.
+  type: Gauge
+  stabilityLevel: ALPHA
```

### kubelet_imagemanager_ondisk_pullintents
```diff
+- name: imagemanager_ondisk_pullintents
+  subsystem: kubelet
+  help: Number of ImagePullIntents stored on disk.
+  type: Gauge
+  stabilityLevel: ALPHA
```

### kubelet_podcertificate_states
```diff
+- name: kubelet_podcertificate_states
+  help: Gauge vector reporting the number of pod certificate projected volume sources, faceted by signer_name and state.
+  type: Custom
+  stabilityLevel: ALPHA
+  labels:
+    - signer_name
+    - state
```

### resourceclaim_controller_resource_claims
```diff
 - name: resourceclaim_controller_resource_claims
-  help: Number of ResourceClaims, categorized by allocation status and admin access
+  help: Number of ResourceClaims, categorized by allocation status, admin access, and source. Source can be 'resource_claim_template' (created from a template), 'extended_resource' (extended resources), or empty (manually created by a user).
   type: Custom
   stabilityLevel: ALPHA
   labels:
     - allocated
     - admin_access
+    - source
```

### rest_client_exec_plugin_policy_call_total
```diff
+- name: rest_client_exec_plugin_policy_call_total
+  help: Number of comparisons of an exec plugin to the plugin policy and allowlist (if any), partitioned by whether or not the policy permits the plugin
+  type: Counter
+  stabilityLevel: ALPHA
+  labels:
+    - allowed
+    - denied
```

### scheduler_batch_attempts_total
```diff
+- name: batch_attempts_total
+  subsystem: scheduler
+  help: Counts of results when we attempt to use batching.
+  type: Counter
+  stabilityLevel: ALPHA
+  labels:
+    - profile
+    - result
```

### scheduler_batch_cache_flushed_total
```diff
+- name: batch_cache_flushed_total
+  subsystem: scheduler
+  help: Counts of cache flushes by reason.
+  type: Counter
+  stabilityLevel: ALPHA
+  labels:
+    - profile
+    - reason
```

### scheduler_get_node_hint_duration_seconds
```diff
+- name: get_node_hint_duration_seconds
+  subsystem: scheduler
+  help: Latency for getting a node hint.
+  type: Histogram
+  stabilityLevel: ALPHA
+  labels:
+    - hinted
+    - profile
+  buckets:
+    - 1e-05
+    - 2e-05
+    - 4e-05
+    - 8e-05
+    - 0.00016
+    - 0.00032
+    - 0.00064
+    - 0.00128
+    - 0.00256
+    - 0.00512
+    - 0.01024
+    - 0.02048
```

### scheduler_pod_scheduled_after_flush_total
```diff
+- name: pod_scheduled_after_flush_total
+  subsystem: scheduler
+  help: Number of pods that were successfully scheduled after being flushed from unschedulablePods due to timeout. This metric helps detect potential queueing hint misconfigurations or event handling issues.
+  type: Counter
+  stabilityLevel: ALPHA
```

### scheduler_resourceclaim_creates_total
```diff
+- name: resourceclaim_creates_total
+  subsystem: scheduler
+  help: Number of ResourceClaims creation requests within scheduler
+  type: Counter
+  stabilityLevel: ALPHA
+  labels:
+    - status
```

### scheduler_store_schedule_results_duration_seconds
```diff
+- name: store_schedule_results_duration_seconds
+  subsystem: scheduler
+  help: Latency for getting a no.
+  type: Histogram
+  stabilityLevel: ALPHA
+  labels:
+    - profile
+  buckets:
+    - 1e-05
+    - 2e-05
+    - 4e-05
+    - 8e-05
+    - 0.00016
+    - 0.00032
+    - 0.00064
+    - 0.00128
+    - 0.00256
+    - 0.00512
+    - 0.01024
+    - 0.02048
```

### statefulset_controller_statefulset_max_unavailable
```diff
+- name: statefulset_max_unavailable
+  subsystem: statefulset_controller
+  help: Maximum number of unavailable pods allowed during StatefulSet rolling updates
+  type: Gauge
+  stabilityLevel: ALPHA
+  labels:
+    - pod_management_policy
+    - statefulset_name
+    - statefulset_namespace
```

### statefulset_controller_statefulset_unavailable_replicas
```diff
+- name: statefulset_unavailable_replicas
+  subsystem: statefulset_controller
+  help: Current number of unavailable pods in StatefulSet
+  type: Gauge
+  stabilityLevel: ALPHA
+  labels:
+    - pod_management_policy
+    - statefulset_name
+    - statefulset_namespace
```

### workqueue_adds_total
```diff
 - name: adds_total
   subsystem: workqueue
   help: Total number of adds handled by workqueue
   type: Counter
-  stabilityLevel: ALPHA
+  stabilityLevel: BETA
   labels:
     - name
```

### workqueue_depth
```diff
 - name: depth
   subsystem: workqueue
   help: Current depth of workqueue
   type: Gauge
-  stabilityLevel: ALPHA
+  stabilityLevel: BETA
   labels:
     - name
```

### workqueue_longest_running_processor_seconds
```diff
 - name: longest_running_processor_seconds
   subsystem: workqueue
   help: How many seconds has the longest running processor for workqueue been running.
   type: Gauge
-  stabilityLevel: ALPHA
+  stabilityLevel: BETA
   labels:
     - name
```

### workqueue_queue_duration_seconds
```diff
 - name: queue_duration_seconds
   subsystem: workqueue
   help: How long in seconds an item stays in workqueue before being requested.
   type: Histogram
-  stabilityLevel: ALPHA
+  stabilityLevel: BETA
   labels:
     - name
   buckets:
     - 1e-08
     - 1e-07
     - 1e-06
     - 9.999999999999999e-06
     - 9.999999999999999e-05
     - 0.001
     - 0.01
     - 0.1
     - 1
     - 10
```

### workqueue_retries_total
```diff
 - name: retries_total
   subsystem: workqueue
   help: Total number of retries handled by workqueue
   type: Counter
-  stabilityLevel: ALPHA
+  stabilityLevel: BETA
   labels:
     - name
```

### workqueue_unfinished_work_seconds
```diff
 - name: unfinished_work_seconds
   subsystem: workqueue
   help: How many seconds of work has done that is in progress and hasn't been observed by work_duration. Large values indicate stuck threads. One can deduce the number of stuck threads by observing the rate at which this increases.
   type: Gauge
-  stabilityLevel: ALPHA
+  stabilityLevel: BETA
   labels:
     - name
```

### workqueue_work_duration_seconds
```diff
 - name: work_duration_seconds
   subsystem: workqueue
   help: How long in seconds processing an item from workqueue takes.
   type: Histogram
-  stabilityLevel: ALPHA
+  stabilityLevel: BETA
   labels:
     - name
   buckets:
     - 1e-08
     - 1e-07
     - 1e-06
     - 9.999999999999999e-06
     - 9.999999999999999e-05
     - 0.001
     - 0.01
     - 0.1
     - 1
     - 10
```

